!function(a){"use strict";window.namespace=function(a){for(var b,c=window,d=a.split(".");b=d.shift();)c[b]=c[b]||{},c=c[b]}}(window._),this.DashAutocompleteJST=this.DashAutocompleteJST||{},this.DashAutocompleteJST["scripts/dash-autocomplete/container_view_template.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div data-id="search-view-container"></div>\n<div>\n  <div data-id="spinner-container"></div>\n  <div data-id="collection-view-container"></div>\n</div>\n';return __p},this.DashAutocompleteJST["scripts/dash-autocomplete/search_input/template.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<input type="text" data-id="text-input">\n';return __p},function(){namespace("DashAutocomplete"),DashAutocomplete.Search=function(){function a(a){this.options=null!=a?a:{},this.collectionView=this.options.collectionView}return a.prototype.debouncedSearch=function(){return _.debounce(function(a){return function(b){return a.search(b)}}(this),300)},a.prototype.search=function(a){return this.startSpinner(),this.request(a)},a.prototype.request=function(a){return $.ajax({url:this.options.url,method:"POST",headers:{authorization:"Bearer "+this.options.token},data:this.parameterize(a),contentType:"application/json",success:function(a){return function(b){return a.successCallback(b)}}(this),error:function(a){return function(b,c){return a.stopSpinner(),a.collectionView.showError(b,c)}}(this)})},a.prototype.startSpinner=function(){return this.options.startSpinner()},a.prototype.stopSpinner=function(){return this.options.stopSpinner()},a.prototype.parameterize=function(a){return new DashAutocomplete.SearchParameters({searchValue:a}).toJSON()},a.prototype.successCallback=function(a){return this.stopSpinner(),_.isEmpty(a)?this.collectionView.showNoResults():this.collectionView.showResults(a)},a}()}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;namespace("DashAutocomplete.SearchInput"),DashAutocomplete.SearchInput.View=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template=DashAutocompleteJST["scripts/dash-autocomplete/search_input/template.ejs"],c.prototype.initialize=function(a){this.options=a},c.prototype.events={"keyup [data-id=text-input]":"executeCallbackIfTextInputHasChanged"},c.prototype.render=function(){return this.$el.html(this.template),this},c.prototype.executeCallbackIfTextInputHasChanged=function(){return this.hasTextInputChanged()?(this._lastTextInputValue=this.getTextInputValue(),this.executeCallback()):void 0},c.prototype.hasTextInputChanged=function(){return this.getTextInputValue()!==this.lastTextInputValue()},c.prototype.lastTextInputValue=function(){return this._lastTextInputValue||""},c.prototype.executeCallback=function(){return this.options.callback(this.getTextInputValue())},c.prototype.getTextInputValue=function(){return this.$("[data-id=text-input]").val()},c}(Backbone.View)}.call(this),function(){namespace("DashAutocomplete"),DashAutocomplete.SearchParameters=function(){function a(a){this.options=a}return a.prototype.paramData=function(){return{search_string:this.options.searchValue||"",current_page:this.options.currentPage||1,items_per_page:this.options.itemsPerPage||10,sort_order:{},filters:this.filters()}},a.prototype.toJSON=function(){return JSON.stringify(this.paramData())},a.prototype.filters=function(){var a;return a={},this.hasFilter()&&(a[this.options.filterName]=this.options.filterValue),a},a.prototype.hasFilter=function(){return!!this.options.filterName&&!!this.options.filterValue},a}()}.call(this),function(){namespace("DashAutocomplete"),DashAutocomplete.ContainerConfiguration=function(){function a(a,b){this.options=a,this.window=null!=b?b:window}return a.prototype.configuration=function(){return this.alertValidationErrors(),{token:this.options.token,collectionView:this.options.collectionView,url:this.options.url,el:this.options.el}},a.prototype.alertValidationErrors=function(){var a;return a=[],_.isUndefined(this.options.el)&&a.push('the "el" parameter must be present.'),_.isUndefined(this.options.token)&&a.push('the "token" parameter must be present.'),_.isUndefined(this.options.url)&&a.push('the "url" parameter must be present.'),this.doesCollectionViewImplement("render")||a.push('the "collectionView" must implement "render".'),this.doesCollectionViewImplement("showResults")||a.push('the "collectionView" must implement "showResults".'),this.doesCollectionViewImplement("showNoResults")||a.push('the "collectionView" must implement "showNoResults".'),this.doesCollectionViewImplement("showError")||a.push('the "collectionView" must implement "showError".'),_.isEmpty(a)?void 0:this.window.alert(a.join(" "))},a.prototype.doesCollectionViewImplement=function(a){return!_.isUndefined(this.options.collectionView[a])},a}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;namespace("DashAutocomplete"),DashAutocomplete.ContainerView=function(c){function d(){return this.stopSpinner=a(this.stopSpinner,this),this.startSpinner=a(this.startSpinner,this),d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.initialize=function(a){this.options=a},d.prototype.template=DashAutocompleteJST["scripts/dash-autocomplete/container_view_template.ejs"],d.prototype.render=function(){return this.$el.html(this.template),this.$("[data-id=collection-view-container]").html(this.options.collectionView.render().el),this.$("[data-id=search-view-container]").html(this.searchInput().render().el),this},d.prototype.searchInput=function(){var a;return a=_.extend({startSpinner:this.startSpinner,stopSpinner:this.stopSpinner},this.options),new DashAutocomplete.SearchInput.View({callback:new DashAutocomplete.Search(a).debouncedSearch()})},d.prototype.spinner=function(){return null!=this.s?this.s:this.s=new DashSpinner.Spinner({target:this.$("[data-id=spinner-container]")})},d.prototype.startSpinner=function(){return this.spinner().spin(),this.$("[data-id=collection-view-container]").hide()},d.prototype.stopSpinner=function(){return this.spinner().stop(),this.$("[data-id=collection-view-container]").show()},d}(Backbone.View)}.call(this);